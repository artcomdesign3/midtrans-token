[build]
  functions = "netlify/functions"

[dev]
  port = 9999
  autoLaunch = false

[functions]
  directory = "netlify/functions"
  # Include RSA key files in function bundle (avoids 4KB env var limit)
  included_files = ["netlify/functions/keys/*.pem"]

# URL Aliases - Hide "midtrans" name from external services
[[redirects]]
  from = "/api/payment-gateway"
  to = "/.netlify/functions/midtrans-token"
  status = 200

[[redirects]]
  from = "/api/payment-gateway/*"
  to = "/.netlify/functions/midtrans-token/:splat"
  status = 200

[[redirects]]
  from = "/api/webhook/airwallex"
  to = "/.netlify/functions/midtrans-token?webhook=airwallex"
  status = 200
